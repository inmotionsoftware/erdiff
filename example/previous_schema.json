{"tables":{"database.likes":{"columns":[{"name":"postid","type":"int","length":10,"position":1,"key":"PRI","pk":true,"ref":{"schema":"database","table":"posts","column":"postid"}},{"name":"userid","type":"int","length":10,"position":2,"key":"PRI","pk":true,"ref":{"schema":"database","table":"users","column":"userid"}},{"name":"created","type":"datetime","length":0,"position":3,"key":"","pk":false},{"name":"deleted","type":"datetime","length":0,"position":4,"key":"","pk":false}],"schema":"database","name":"likes","type":"BASE TABLE"},"database.posts":{"columns":[{"name":"postid","type":"int","length":10,"position":1,"key":"PRI","pk":true,"ref":{"schema":"database","table":"posts","column":"postid"}},{"name":"title","type":"text","length":65535,"position":2,"key":"","pk":false},{"name":"body","type":"text","length":65535,"position":3,"key":"","pk":false},{"name":"userid","type":"int","length":10,"position":4,"key":"MUL","pk":true,"ref":{"schema":"database","table":"users","column":"userid"}},{"name":"inreplyto","type":"int","length":10,"position":5,"key":"MUL","pk":false},{"name":"created","type":"datetime","length":0,"position":6,"key":"","pk":false},{"name":"updated","type":"datetime","length":0,"position":7,"key":"","pk":false},{"name":"deleted","type":"datetime","length":0,"position":8,"key":"","pk":false}],"schema":"database","name":"posts","type":"BASE TABLE"},"database.users":{"columns":[{"name":"userid","type":"int","length":10,"position":1,"key":"PRI","pk":true,"ref":{"schema":"database","table":"users","column":"userid"}},{"name":"name","type":"text","length":65535,"position":2,"key":"","pk":false},{"name":"email","type":"text","length":65535,"position":3,"key":"","pk":false},{"name":"password","type":"text","length":65535,"position":4,"key":"","pk":false},{"name":"created","type":"datetime","length":0,"position":5,"key":"","pk":false},{"name":"updated","type":"datetime","length":0,"position":6,"key":"","pk":false},{"name":"deleted","type":"datetime","length":0,"position":7,"key":"","pk":false}],"schema":"database","name":"users","type":"BASE TABLE"}},"sprocs":{"database.prune_accounts":{"schema":"database","name":"prune_accounts","type":"PROCEDURE","body":"CREATE DEFINER = 'root@localhost' PROCEDURE prune_accounts (null)  CONTAINS SQL\n          BEGIN\n  UPDATE users SET deleted=NOW() WHERE updated < DATE_SUB(CURRENT_DATE, INTERVAL 6 MONTH);\nEND","security":"DEFINER","def":"root@localhost","access":"CONTAINS SQL","comment":"","params":null},"database.prune_posts":{"schema":"database","name":"prune_posts","type":"PROCEDURE","body":"CREATE DEFINER = 'root@localhost' PROCEDURE prune_posts (null)  CONTAINS SQL\n          BEGIN\n  \n  UPDATE posts SET deleted=NOW() WHERE deleted IS NULL AND userid in (SELECT userid FROM users WHERE deleted > DATE_SUB(CURRENT_DATE, INTERVAL 1 MONTH));\nEND","security":"DEFINER","def":"root@localhost","access":"CONTAINS SQL","comment":"","params":null}}}